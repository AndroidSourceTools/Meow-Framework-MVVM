

# Meow Framework MVVM Android/Kotlin
A Framework that simplify developing MVVM architecture and Material Design in Android with Kotlin language including useful Extensions and Sample Application.   
![](/Resources/logo_meow_framework.png)
[ ![Download](https://api.bintray.com/packages/infinitydesign/meow/Meow-Framework-MVVM/images/download.svg?version=0.2.4-alpha) ](https://bintray.com/infinitydesign/meow/Meow-Framework-MVVM/0.2.4-alpha/link)

## Setup
```groovy
implementation("com.etebarian:meow-framework-mvvm:0.2.4-alpha")
```
After adding library, some of most useful libraries (such as `Androidx AppCompat` , `Coroutine` , `Glide` , `Kodein` , `Kotlinx Serialization` , `Material Components` , `Moshi` , `Navigation Components` , `Retrofit` ) will be added in your app. So you don't need to add this libraries manually.
> Enable Androidx in `gradle.properties` 
>```properties
>android.useAndroidX=true
>android.enableJetifier=true
>```
>Update `build.gradle` like below : 
>```groovy
>android{
>	defaultConfig {    
>		multiDexEnabled true  
>		vectorDrawables.useSupportLibrary true
>	}
>	compileOptions {  
>		sourceCompatibility JavaVersion.VERSION_1_8  
>		targetCompatibility JavaVersion.VERSION_1_8 
>	}
>	dataBinding {  
>		enabled true  
>	}
>}
>```

## Getting Started
### Initialize
Create your application class that extends `MeowApp` and set it in `AndroidManifest.xml`. Dependency Injection in MVVM architecture is necessary so we use `Kodein-DI` Framework. 
You need to define `appModule` for ViewModel.
```kotlin
class App : MeowApp() {

	// Create a kodein module
	val appModule = Module("App Module", false){
	    // Provide object of SomeOfClass(such as View Models) in Kodein with bind() function 
	    // bind() from singleton { SomeOfClass(instance()) } 
	}
	override val kodein = Kodein.lazy {  
		bind() from singleton { kodein.direct }  
		bind() from singleton { this@App }  
		import(androidXModule(this@App))  
		import(meowModule)  
		import(appModule)  
	}
}
```
### Meow Controller üê±
`MeowController` is a class that controls some of configurations in your app like language and theme. Configuration updates are in Real time . Dynamic Localization & Day/Night Theme configurations must be set here with `MeowController`.
  If you use `avoidException` in your app, this class can controls Exception Handlers with `onException` property. 
```Kotlin
class App : MeowApp() { 
	// Layout Direction would be set automatically. 
    // (Example: "en": LayoutDirection.LTR  "fa": LayoutDirection.RTL)
    override fun getLanguage(context: Context?) = "en" // or any language such as ("fa","fr","ar",etc.)
    
    // Sample app theme is setted by Android System Light/Dark (Day/Night) mode
    override fun getTheme(context: Context?) = if (context.isNightModeFromSettings()) MeowController.Theme.NIGHT else  MeowController.Theme.DAY
    
    override fun onCreate() {
        super.onCreate()
         MeowController().apply {         
            isDebugMode = BuildConfig.DEBUG
            language = getLanguage(this@App) 
            theme = getTheme(this@App)
        }.bindApp(this)
    }
}
```
You can update language and theme from UI Thread by using `MeowController` global instance.
```kotlin
import meow.controller

controller.updateLanguage(meowActivity, string)
controller.updateTheme(meowActivity, theme)
```

###  MVVM Architecture
MVVM is Model-View-ViewModel that we define it in Android App as Data Model - View (Activity, Fragment, DialogFragment, BottomSheetDialogFragment) - MeowViewModel.
 
Follow below steps to be have one application with MVVM Architecture.
#### 1.  Create your ViewModel extends `MeowViewModel` .
```kotlin
class MainViewModel(app: App): MeowViewModel(app)
```
#### 2.  Provide your View Model in appModule.
```kotlin
val appModule = ...{
	bindAutoTag<MainViewModel>() with provider {  
	  MainViewModel(kodein.direct.instance())  
	}
}
```
>`bindAutoTag()` is function from `meow.util.*`
#### 3.  Create XML layout with `DataBinding` structure.
```xml
<layout xmlns:android="http://schemas.android.com/apk/res/android">
	<data>
		<variable  
		  name="viewModel"  
		  type="MainViewModel" />
	</data>
	<LinearLayout ... /> <!-- or another View -->
</layout>
```

#### 4.  Create Activity/Fragment  + `DataBinding`  + `ViewModel` extends `MeowActivity/MeowFragment`.
‚Äç‚Äç‚Äç`MainActivity` is a sample activity that needs Kodein Dependency Injection and ViewDataBinding and View Model so see this sample  :
```kotlin
class MainActivity : MeowActivity<ActivityMainBinding>() {
	// ActivityMainBinding is generated by Androidx Lifecycle DataBinding Utils
  
	private val viewModel: MainViewModel by instanceViewModel()

    override fun layoutId() = R.layout.activity_main
      
	override fun initViewModel() {// Set View Model in binding 
	    binding.viewModel = viewModel
	}
}
```
Now you have one Activity with MVVM architecture. 


License
--------

    Copyright 2020 Hamidreza Etebarian

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.


